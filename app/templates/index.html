<!DOCTYPE html>
{% load widget_tweaks %} {% load static %}
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous" />

    <title>Detecção e Analise Facial</title>
</head>

<body>
    <!-- Navigation bar -->
    <nav class="navbar navbar-dark" style="background-color: #1c0f38;">
        <div class="container">
            <a href="/" class="navbar-brand">
                <img src="{% static 'photo.png' %}" alt="" width="50" height="50">
                Sistema de Detecção e Analise Facial
            </a>
            <ul class="navbar-nav">
                <li class="nav-item active">
                  <a class="nav-link" href="/">Home</a>
                </li> 
              </ul>
        </div> 
    </nav> 
    <div class="container py-5">
        <div class="row g-5">
            <div class="col-md-6">
                <h2>Detecção e Analise Facial</h2>
                
                <form action="#" method="POST" enctype="multipart/form-data">
                    {% csrf_token %} 
                    <div class="form-group py-5">
                        {% render_field form.image class="form-control form-control-lg" type="file" %}
                    </div>
                    <input class="btn btn-success btn-lg shadow-sm" type="submit" value="submit" />
                </form>
             </div>


             {% if upload %}
            <div class="col-md-6">
                <h2>Reconhecimento</h2>
                <div class="col py-5">
                    <img class="img-fluid rounded mx-auto" src="/media/ml_output/process.jpg" alt="">
                </div>
            </div>
            <div class="col-md-12"> 
                <div class="table-responsive shadow">
                    <table class="table table-striped">
                        <tr>
                            <td>Faces Extraidas</td>
                            {% for c in results.count %}
                            <td>
                                <img class="rounded mx-auto" width="70" height="100"
                                    src="/media/ml_output/roi_{{ c }}.jpg" alt="">
                            </td>
                            {% endfor %}
                        </tr>
                        <tr>
                            <td>Detecção das Faces</td>
                            {% for detect_score in results.face_detect_score %}
                            <td>{{ detect_score }}</td>
                            {% endfor %}
                        </tr>  
                    </table> 
                </div>
            </div>
            {% endif %}
        </div>
    </div> 
    <!-- Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
</body> 
</html>